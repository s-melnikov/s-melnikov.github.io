// hyperapp@0.7.1 + hash routing
var hyperapp=function(){function n(n){function e(n){for(var e=0;e<w.onError.length;e++)w.onError[e](n);if(0>=e)throw n}function t(n,r,i){Object.keys(r).forEach(function(c){n[c]||(n[c]={});var u,f=i?i+"."+c:c,d=r[c];"function"==typeof d?n[c]=function(n){for(u=0;u<w.onAction.length;u++)w.onAction[u](f,n);var t=d(v,n,y,e);if(void 0===t||"function"==typeof t.then)return t;for(u=0;u<w.onUpdate.length;u++)w.onUpdate[u](v,t,n);v=a(v,t),o(v,m)}:t(n[c],d,f)})}function r(n){"l"!==document.readyState[0]?n():document.addEventListener("DOMContentLoaded",n)}function o(n,e){for(t=0;t<w.onRender.length;t++)e=w.onRender[t](n,e);h(g,p,p=e(n,y),0);for(var t=0;t<A.length;t++)A[t]();A=[]}function a(n,e){var t,r={};if(i(e)||Array.isArray(e))return e;for(t in n)r[t]=n[t];for(t in e)r[t]=e[t];return r}function i(n){return n=typeof n,"string"===n||"number"===n||"boolean"===n}function c(n,e){setTimeout(function(){n(e)},0)}function u(n,e){return n.tag!==e.tag||typeof n!=typeof e||i(n)&&n!==e}function f(n){var e;if("string"==typeof n)e=document.createTextNode(n);else{e=n.data&&n.data.ns?document.createElementNS(n.data.ns,n.tag):document.createElement(n.tag);for(var t in n.data)"onCreate"===t?c(n.data[t],e):s(e,t,n.data[t]);for(var r=0;r<n.children.length;r++)e.appendChild(f(n.children[r]))}return e}function d(n,e,t){n.removeAttribute("className"===e?"class":e),"boolean"!=typeof t&&"true"!==t&&"false"!==t||(n[e]=!1)}function s(n,e,t,r){if("style"===e)for(var o in t)n.style[o]=t[o];else if("o"===e[0]&&"n"===e[1]){var a=e.substr(2).toLowerCase();n.removeEventListener(a,r),n.addEventListener(a,t)}else"false"===t||t===!1?(n.removeAttribute(e),n[e]=!1):(n.setAttribute(e,t),"http://www.w3.org/2000/svg"!==n.namespaceURI&&(n[e]=t))}function l(n,e,t){for(var r in a(t,e)){var o=e[r],i=t[r],u=n[r];void 0===o?d(n,r,i):"onUpdate"===r?c(o,n):(o!==i||"boolean"==typeof u&&u!==o)&&s(n,r,o,i)}}function h(n,e,t,r){if(void 0===e)n.appendChild(f(t));else if(void 0===t){var o=n.childNodes[r];A.push(n.removeChild.bind(n,o)),e&&e.data&&e.data.onRemove&&c(e.data.onRemove,o)}else if(u(t,e))n.replaceChild(f(t),n.childNodes[r]);else if(t.tag){var o=n.childNodes[r];l(o,t.data,e.data);for(var a=t.children.length,i=e.children.length,d=0;a>d||i>d;d++){var s=t.children[d];h(o,e.children[d],s,d)}}}for(var v,p,g,m=n.view||function(){return""},y={},b=[],w={onError:[],onAction:[],onUpdate:[],onRender:[]},E=[n].concat((n.plugins||[]).map(function(e){return e(n)})),A=[],R=0;R<E.length;R++){var C=E[R];void 0!==C.model&&(v=a(v,C.model)),C.actions&&t(y,C.actions),C.subscriptions&&(b=b.concat(C.subscriptions));var L=C.hooks;L&&Object.keys(L).forEach(function(n){w[n].push(L[n])})}r(function(){g=n.root||document.body.appendChild(document.createElement("div")),o(v,m);for(var t=0;t<b.length;t++)b[t](v,y,e)})}function e(n){return{model:{router:t(n.view,location.hash)},actions:{router:{match:function(e,r){return{router:t(n.view,r)}},go:function(n,e,t){t.router.match(e)}}},hooks:{onRender:function(e){return n.view[e.router.match]}},subscriptions:[function(n,e){addEventListener("hashchange",function(){e.router.match(location.hash)})}]}}function t(n,e){var t,r={};for(var o in n){var a=[];if("*"!==o&&((e.slice(2)||"/").replace(new RegExp("^"+o.replace(/\//g,"\\/").replace(/:([A-Za-z0-9_]+)/g,function(n,e){return a.push(e),"([A-Za-z0-9_]+)"})+"/?$","g"),function(){for(var n=1;n<arguments.length-2;n++)r[a.shift()]=arguments[n];t=o}),t))break}return{match:t||"*",params:r}}var r=function(){function n(e,t,r){t.ns="http://www.w3.org/2000/svg";for(var o=0;o<r.length;o++){var a=r[o];a.data&&n(a.tag,a.data,a.children)}}var e,t,r,o=[];return function(a,i){var c,u;for(r=[],e=arguments.length;e-- >2;)o.push(arguments[e]);for(;o.length;)if(Array.isArray(t=o.pop()))for(e=t.length;e--;)o.push(t[e]);else null!=t&&t!==!0&&t!==!1&&("number"==typeof t&&(t+=""),c="string"==typeof t,c&&u?r[r.length-1]+=t:(r.push(t),u=c));return"function"==typeof a?a(i,r):("svg"===a&&n(a,i,r),{tag:a,data:i||{},children:r})}}();return{h:r,app:n,Router:e}}();