<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OLX</title>
	<style>
		*, *::before, *::after {
			box-sizing: border-box;
		}
		body {
			font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
			font-size: 12px;
			color: #565656;
		}
		.row {
			display: flex;
		}
		.row.rejected {
			opacity: 0.5;
			text-decoration: line-through;
		}
		.cell {
			padding: 4px 8px;
		}
		.number {
			width: 40px;
			text-align: right;
		}
		.page {
			width: 28px;
			text-align: right;	
			font-weight: 500;		
		}
		.price {
			width: 48px;
			text-align: right;
		}
		.date {
			width: 92px;
		}
		.image {
			position: relative;
		}
		.image .icon {
			display: block;
			width: 12px;
			height: 12px;
			border-radius: 50%;
			background-color: #dcdcdc;
		}
		.image .preview {
			display: none;
			width: 130px;
			height: 130px;
			position: absolute;
			left: -130px;
			background-color: #f0f0f0;
			top: 50%;
			transform: translate(-8px, -50%);
			background-size: cover;
		}
		.image:hover .preview {
			display: block;
		}
	</style>
</head>
<body>
	<div id="root"></div>
	<script>
		const [rootEl] = $("#root");

		fetch("olx.json").then((resp) => resp.json()).then((data) => {
			console.log(data);
			data.forEach((item, index) => {
				if (item.statusShort !== "accepted") return;
				rootEl.append(h("div", { className: `row ${item.statusShort}` }, 
					h("div", { className: "cell number" }, index + 1),
					h("div", { className: "cell page" }, Math.floor(index / 5) + 1),
					h("div", { className: "cell date" }, new Date(item.confirmedAt).toISOString().slice(0, 10)),
					h("div", { className: "cell price" }, item.product.price / 100),
					h("div", { className: "cell image" }, h("span", { className: "icon" }), h("div", { 
							className: "preview", 
							style: `background-image: url(${item.ad.photo.replace("{width}", 130).replace("{height}", 130)})` 
						})),
					h("div", { className: "cell title" }, item.ad.title),
				));
			});
		});

		function h(nodeName, props, ...children) {
			const el = document.createElement(nodeName);
			for (let prop in props) el[prop] = props[prop];
			children.forEach((child) => el.append(child));
			return el;
		}
		function $(query) { return [...document.querySelectorAll(query)] }
		function log(...args) { console.log(...args) }
	</script>
</body>
</html>

