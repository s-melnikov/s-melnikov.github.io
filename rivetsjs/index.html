<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <div id="root">
    <ul>
      <li rv-each-auction="auctions">
        <section>
          <h3>{auction.product.name}</h3>
          <p>Current bid: {auction.currentBid | money}</p>
          <aside rv-if="auction.timeLeft | lt 120">
            Hurry up! There is {auction.timeLeft | time} left.
          </aside>
          <input rv-value="auction.currentBid">
        </section>
      </li>
    <ul>
  </div>
  <script src="sightglass.js"></script>
  <script src="rivets.js"></script>
  <script>
    rivets.formatters.lt = (value, compare) => (value < compare);
    rivets.formatters.gt = (value, compare) => (value > compare);
    rivets.formatters.money = (value) => `$${(value / 100).toFixed(2)}`;
    rivets.formatters.time = (value) => {
        let h = ~~(value / 3600);
        let m = ~~((value % 3600) / 60);
        let s = ~~value % 60;
        return `${h > 9 ? h : `0${h}`}h ${m > 9 ? m : `0${m}`}m ${s > 9 ? s : `0${s}`}s`;
    }
    rivets.formatters.currency = {
      read(value) {
        return (value / 100).toFixed(2);
      },
      publish(value) {
        return Math.round(parseFloat(value) * 100);
      }
    }
    rivets.bind(document.querySelector('#root'), {
      auctions: [
        {
          product: {
            name: "Samsung S8"
          },
          currentBid: 19900,
          timeLeft: 110
        },
        {
          product: {
            name: "Nexus 6"
          },
          currentBid: 16900,
          timeLeft: 200
        },
        {
          product: {
            name: "IPhone XS"
          },
          currentBid: 29900,
          timeLeft: 320
        },
        {
          product: {
            name: "LG"
          },
          currentBid: 9900,
          timeLeft: 70
        },
        {
          product: {
            name: "Xiaomi"
          },
          currentBid: 5900,
          timeLeft: 250
        },
      ]
    });
  </script>
</body>
</html>