<page-collection>

  <h2>Collection</h2>

  <div class="columns">
    <div class="column col-9">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Title</th>
            <th>Name</th>
            <th>Type</th>
            <th></th>
          </tr>
        </thead>
        <tbody if={ collection }>
          <tr each={ collection.fields }>
            <td>{ title }</td>
            <td>{ name }</td>
            <td>{ type }</td>
            <td class="text-right">
              <a class="btn btn-link">action</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="column col-3">
      <div class="text-center">
        <button class="btn col-6 mb-10" onclick={ showAddFieldModal }>New field</button>
        <button class="btn col-6 mb-10">Edit</button>
        <button class="btn col-6">Delete</button>
      </div>
    </div>
  </div>

  <div class="modal active" if={ isAddFieldModalShowed }>
    <div class="modal-overlay"></div>
    <form class="modal-container" onsubmit={ addFieldModalSubmit }>
      <div class="modal-header">
        <a href="#" class="btn btn-clear float-right" onclick={ hideAddFieldModal }></a>
        <div class="modal-title">Add field</div>
      </div>
      <div class="modal-body">
        <div class="content">
          <div class="form-group">
            <label>Field name</label>
            <input class="form-input" type="text" name="field_name" required>
          </div>
          <div class="form-group">
            <label>Field identifier</label>
            <input class="form-input" type="text" name="field_id" required>
          </div>
          <div class="form-group">
            <label>Field type</label>
            <select class="form-select" name="field_type">
              <option value="string">String</option>
              <option value="text">Text</option>
              <option value="number">Number</option>
              <option value="datetime">Date/Time</option>
              <option value="media">Media</option>
              <option value="boolean">Boolean</option>
              <option value="reference">Reference</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <span class="btn btn-link btn-close">Close</span>
        <button class="btn btn-primary">Submit</button>
      </div>
    </form>
  </div>

  <div class="modal" id="edit-collection">
    <div class="modal-overlay"></div>
    <form class="modal-container" style="width:420px" method="post">
      <div class="modal-header">
        <a href="#" class="btn btn-clear float-right"></a>
        <div class="modal-title">Edit collection</div>
      </div>
      <div class="modal-body">
        <div class="content">
          <div class="form-group">
            <label>Field name</label>
            <input class="form-input" type="text" name="name"
              value="<?php print $collection['name'] ?>" required>
          </div>
          <div class="form-group">
            <label>Field type</label>
            <textarea class="form-input" name="description" rows="6"
              maxlength="500"><?php print $collection['description'] ?></textarea>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <a href="#" class="btn btn-link btn-close">Close</a>
        <button class="btn btn-primary">Submit</button>
      </div>
    </form>
  </div>

  <div class="modal" id="delete-collection">
    <div class="modal-overlay"></div>
    <form class="modal-container" style="width:420px" method="post">
      <div class="modal-header">
        <a href="#" class="btn btn-clear float-right"></a>
        <div class="modal-title">Delete collection</div>
      </div>
      <div class="modal-body">
        <div class="content text-center">
          <p>Are you <strong>ABSOLUTELY</strong> sure?</p>
          <p>This action <strong>CANNOT</strong> be undone.
            This will permanently delete the
            "<strong><?php print $collection['name'] ?></strong>" collection.</p>
          <p>Please type in the name of the repository to confirm.</p>
          <div class="form-group">
            <input class="form-input" type="text" name="to_delete" required>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-block" disabled>
          I understand the consequences, delete this collection
        </button>
      </div>
    </form>
  </div>

  <script>
    var self = this

    self.isAddFieldModalShowed = false

    showAddFieldModal() {
      self.isAddFieldModalShowed = true
    }

    hideAddFieldModal() {
      self.isAddFieldModalShowed = false
    }

    addFieldModalSubmit(e) {
      var data =
    }

    self.on("mount", () => {
      api.collections().get(opts.id).then(resp => {
        log("api.collections().get(id)", resp)
        self.collection = resp.collection
        self.update()
      })
    })
  </script>
</page-collection>