<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tasks</title>
  <link rel="stylesheet" href="https://unpkg.com/wingcss@1.0.0-beta/dist/wing.min.css">
</head>
<body>
  <app></app>
  <script src="https://unpkg.com/riot@3.12.0/riot.min.js"></script>
  <script type="text/html" id="app-template">
    !!!!
  </script>
  <script>
    const tpl = name => document.querySelector('#' + name + '-template').innerHTML;
    const uniqid = () => {
      let s = Date.now().toString(36);
      while (s.length < 12) s += Math.floor(Math.random() * 36).toString(36);
      return s;
    }
    const db = name => {
      let data = JSON.parse(localStorage[name] || '{}');
      return {
        add(column, item) {
          let col = data[column] || (data[column] = {});
          col[uniqid()] = item;
          localStorage[name] = JSON.stringify(data);
          return col;
        },
        get(column) {
          return data[column];
        },
        del(column, uid) {
          let col = data[column] || (data[column] = {});
          if (uid) delete col[uid];
          else data[column] = {};
          localStorage[name] = JSON.stringify(data);
        }
      }
    }
    riot.tag('app', tpl('app'), function(opts) {

    })
    riot.mount('*');
  </script>
</body>
</html>